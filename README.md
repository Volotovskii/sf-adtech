## SF-AdTech — это система трекинга трафика, предназначенная для организации взаимодействия между:

Рекламодателями (advertisers) — которые хотят привлекать посетителей на свои сайты.
Веб-мастерами (webmasters) — которые размещают рекламу у себя и приводят трафик.
Администраторами — которые управляют системой.
Рекламодатель создаёт офферы (предложения), указывает целевой URL и стоимость за клик.
Веб-мастер подписывается на офферы, получает персональные ссылки, и размещает их у себя.
Когда пользователь переходит по ссылке — система фиксирует клик, проверяет подписку, и перенаправляет на сайт рекламодателя.
Система учитывает комиссию (например, 20%), а веб-мастер получает оставшуюся часть (80%).

### Функционал
# 1.  Роли:
  #### Администратор:
  -  Управление пользователями (активация/деактивация).
  -  Просмотр общей статистики.
  -  Контроль новых рекламодателей и веб-мастеров (подтверждение/отклонение).
  -  Просмотр отказов и выданных ссылок.
 #### Рекламодатель:
 - Создание/редактирование/удаление офферов.
   Просмотр статистики по офферам (клики, расходы).
- Деактивация офферов.
#### Веб-мастер:
- Просмотр доступных офферов.
- Подписка/отписка на офферы.
- Указание своей наценки.
- Получение персональных ссылок.
- Просмотр доходов и кликов.
# 2.  Особенности:
 - Drag & Drop для офферов (перемещение между статусами).
 - Асинхронные запросы (через fetch).
 - Отдельные JS и CSS файлы (не встроенные).
 - Bootstrap 5 и Chart.js для интерфейса и графиков.
 - Реализована безопасность (CSRF, XSS, SQL-инъекции).
 - Soft deletes для офферов.
 - Подтверждение новых пользователей администратором.
 - Статистика по дням/часам/минутам/мес/годам.
 - Отображение общего графика и по каждому офферу отдельно.
 3)  Использованные технологии
 - Laravel 10
 - Backend (MVC, Auth, ORM, Middleware)
 - PHP
 - MySQL
 - Blade Шаблонизатор
 - Bootstrap 5 Frontend-фреймворк
 - Chart.js Графики
  -  Vite Сборка CSS/JS
 - Laravel Breeze Аутентификация
 - Laravel Permission Роли и права


# 4.  Структура проекта
 ### Папки:
1) app/ — модели, контроллеры, middleware.
2) resources/views/ — шаблоны (Blade).
3) resources/css/ — стили.
4) resources/js/ — скрипты.
5) database/migrations/ — миграции.
6) database/seeders/ — начальные данные.
7) routes/ — маршруты.
8) public/ — ассеты.

#### Модели:
1) User — пользователь (роли: admin, advertiser, webmaster).
2) Offer — оффер (ссылка, цена за клик, статус).
3) Subscription — подписка веб-мастера на оффер.
4) Click — клик по ссылке.
5) Statistic — агрегированная статистика.
6) LinkLog — лог выданных ссылок.
7) RedirectFailure — лог отказов редиректа.
#### Контроллеры:
1) AdminController — управление системой.
2) AdvertiserController — личный кабинет рекламодателя.
3) WebmasterController — личный кабинет веб-мастера.
4) RedirectController — редиректор с логированием.
5) OfferController — CRUD для офферов.
#### Маршруты:
1) /admin — админка.
2) /advertiser — рекламодатель.
3) /webmaster — веб-мастер.
4) /go/{token} — редиректор.
### Безопасность
 - CSRF-токены для защиты от CSRF-атак.
- SQL-инъекции предотвращены через Eloquent.
- XSS-атаки — через {{ }} в Blade.
- Middleware для проверки ролей и статуса.
- Soft deletes — для удаления данных без потерь.
### Особенности реализации
- Регистрация с подтверждением администратором.
Подписка/отписка через AJAX.
- Drag & Drop с обновлением статуса через fetch.
- Отображение статуса оффера (активен/неактивен/архив).
- Индивидуальные ссылки для веб-мастеров.
- Распределение доходов (80/20).
- Обновление данных без перезагрузки.
- Обработка удалённых офферов.
- Отображение общей статистики и по каждому офферу.

# Данные для входа
 - Email: admin@bk.ru
- Пароль: 12345678-
 - у всех пароль - 12345678-

 # Запуск проекта

 1) клонируйте репозиторий 
 2) перейти в каталог `cd sf-adtech`
 установить зависимости 
    - `composer install`
 - `npm install`
 3) Создайте файл .env
  - `cp .env.example .env`
4) Настройте подключение к базе данных
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=sf_adtech
DB_USERNAME=ваш_пользователь
DB_PASSWORD=ваш_пароль
5) Выполните миграции
 - php artisan migrate --seed
6) Запустите сборку Vite
- npm run build
7)  Запустите сервер
- php artisan serve
8) Откройте в браузере
- http://127.0.0.1:8000